<div id="searchBar-placeholder"></div>
<ul id="dataList-placeholder"></ul>

<script>
    $(document).ready(function(){
        $.get("shared/listItem-project.html", function (listItemTemplate) {
            loadDataIntoProjectListItems(listItemTemplate);
        });
    });

    function loadDataIntoProjectListItems(listItemTemplate) {
        $.getJSON("data/projects.json", function (json) {

            //for each project
            for(var i =0; i<json.projects.length; i++){

                var project = json.projects[i];

                var title = project.title;
                var type = project.type;
                var description = project.description;
                var github = project.github;
                var githubAHREF = generateAHREFtag(github);
                var website = project.website;
                var websiteAHREF = generateAHREFtag(website);
                var keywords = generateKeywordsMarkup(project.keywords);

                //Add the fields to the HTML template
                $(listItemTemplate)
                    .find('.listItem-title')
                        .html(title)
                        .end()
                    .find('.field-type')
                        .html(type)
                        .end()
                    .find('.field-keywords')
                        .html(keywords)
                        .end()
                    .find('.field-description')
                        .html(description)
                        .end()
                    .find('.field-github')
                        .html(githubAHREF)
                        .end()
                    .find('.field-website')
                        .html(websiteAHREF)
                        .end()
                    .appendTo($('#dataList-placeholder')); // Add to data list
            }
        });
    }

    function generateKeywordsMarkup(keywords){
        var stringBuilder = "";

        //for each keyword
        for(var j =0; j<keywords.length; j++){
            stringBuilder += keywords[j] + ", ";
        }

        //Remove final comma and space
        stringBuilder = stringBuilder.slice(0, stringBuilder.length - 2)

        //Add a period
        stringBuilder += ".";
    }

    // function generateTitleDiv(title){
    //     var stringbuilder = '<div ';
    //     stringbuilder += 'onclick="onDetailsClick($(this))" ';
    //     stringbuilder += 'onMouseOver="onMouseOver($(this))"';
    //     stringbuilder += 'onMouseLeave="onMouseLeave($(this))">';
         
    //     stringbuilder += title;
    //     stringbuilder += '</div>';
    //     return stringbuilder;
    // }

    function onMouseOver(obj){
        obj.css("border", "1px solid lime")
        obj.css("cursor", "pointer");

        var titleDiv = obj.children[0];
        console.log("Title div: ");
        console.log(titleDiv);
        titleDiv.css("color", "lime");
    }

    function onMouseLeave(obj){
        obj.css("border", "1px solid #bfbfbf")
        obj.css("color", "inherit");
        //console.log(obj);
        //var titleDiv = obj.children.first();
        titleDiv.css("color", "inherit");
        
    }

    function onDetailsClick(titleDiv) {
        sessionStorage.setItem("ActiveProject", titleDiv.text());
        sessionStorage.setItem("BookmarkIndex", 5);
        location.reload();
    }
</script>