<div id="searchBar-placeholder"></div>
<ul id="dataList-placeholder"></ul>

<script>
    $(document).ready(function(){
        $.get("shared/listItem-project.html", function (listItem) {
            loadDataIntoProjectListItem(listItem);
        });
    });

    function loadDataIntoProjectListItem(listItem) {
        $.getJSON("data/projects.json", function (json) {

            //for each project
            for(var i =0; i<json.projects.length; i++){
                var title = json.projects[i].title;
                //var titleAHREF = generateAHREFtag(getUrlFromDetailName(title), title)
                var type = json.projects[i].type;
                var description = json.projects[i].description;
                var github = json.projects[i].github;
                var githubAHREF = generateAHREFtag(github);
                var website = json.projects[i].website;
                var websiteAHREF = generateAHREFtag(website);

                var keywords = json.projects[i].keywords;
                var keywords_stringbuilder = "";

                //for each keyword
                for(var j =0; j<keywords.length; j++){
                    keywords_stringbuilder += keywords[j] + ", ";
                }

                //Remove final seperator
                keywords_stringbuilder = keywords_stringbuilder.slice(0, keywords_stringbuilder.length - 2)

                //Add a period
                keywords_stringbuilder += ".";

                //Add the fields to the HTML template
                $(listItem)
                    .find('.listItem-title')
                        .html(generateTitleDiv(title))
                        .end()
                    .find('.field-type')
                        .html(type)
                        .end()
                    .find('.field-keywords')
                        .html(keywords_stringbuilder)
                        .end()
                    .find('.field-description')
                        .html(description)
                        .end()
                    .find('.field-github')
                        .html(githubAHREF)
                        .end()
                    .find('.field-website')
                        .html(websiteAHREF)
                        .end()
                    .appendTo($('#dataList-placeholder')); // Add to data list
            }
        });
    }

    function generateAHREFtag(url){
        return generateAHREFtag(url, url);
    }

    function generateAHREFtag(url, stext){
        var stringbuilder = '<a href="';
        stringbuilder += url;
        stringbuilder += '">';
        stringbuilder += stext;
        stringbuilder += '</a>';
        console.log(stringbuilder);
        return stringbuilder;
    }

    function generateTitleDiv(title){
        var stringbuilder = '<div onclick="onDetailsClick($(this))">';
        stringbuilder += title;
        stringbuilder += '</div>';
        return stringbuilder;
    }
    

    function onDetailsClick(obj) {
        console.log(obj);
    }
</script>