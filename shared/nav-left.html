<div id="nav-left">
  <ul>
    <!-- Home -->
    <li>
      <div class="navButton-img-container">
        <img class="bookmark-img" src="img/bookmark.png" alt="Bookmark">
        <div id="navButton-about" class="navButton navButton-parent col-sm-9">
          Home
        </div>
      </div>
      <!-- Home Sub Menu -->
      <ul>
        <li>
          <div class="navButton-img-container navButton-img-container-child">
            <img class="bookmark-img" src="img/bookmark.png" alt="Bookmark">
            <div id="navButton-about-introduction" class="navButton navButton-child col-sm-9">
              Introduction
            </div>
          </div>
        </li>
        <li>
          <div class="navButton-img-container navButton-img-container-child">
            <img class="bookmark-img" src="img/bookmark.png" alt="Bookmark">
            <div id="navButton-about-contact" class="navButton navButton-child col-sm-9">
              Contact
            </div>
          </div>
        </li>
      </ul>
    </li>
    <!-- Projects -->
    <li>
      <div class="navButton-img-container">
        <img class="bookmark-img" src="img/bookmark.png" alt="Bookmark">
        <div id="navButton-projects" class="navButton navButton-parent col-sm-9">
          Projects
        </div>
      </div>
      <!-- Projects Sub Menu -->
      <ul>
        <li>
          <div class="navButton-img-container navButton-img-container-child">
            <img class="bookmark-img" src="img/bookmark.png" alt="Bookmark">
            <div id="navButton-projects-search" class="navButton navButton-child col-sm-9">
              Search
            </div>
          </div>
        </li>
        <li>
          <div class="navButton-img-container navButton-img-container-child">
            <img class="bookmark-img" src="img/bookmark.png" alt="Bookmark">
            <div id="navButton-projects-current" class="navButton navButton-child col-sm-9">
              Current: None
            </div>
          </div>
        </li>
      </ul>
    </li>
    <!-- Components -->
    <li>
      <div class="navButton-img-container">
        <img class="bookmark-img" src="img/bookmark.png" alt="Bookmark">
        <div id="navButton-components" class="navButton navButton-parent col-sm-9">
          Components
        </div>
      </div>
      <ul>
        <li>
          <div class="navButton-img-container navButton-img-container-child">
            <img class="bookmark-img" src="img/bookmark.png" alt="Bookmark">
            <div id="navButton-components-search" class="navButton navButton-child col-sm-9">
              Search
            </div>
          </div>
        </li>
      </ul>
    </li>
    <!-- Coding Challenges -->
    <li>
      <div class="navButton-img-container">
        <img class="bookmark-img" src="img/bookmark.png" alt="Bookmark">
        <div id="navButton-challenges" class="navButton navButton-parent col-sm-9">
          Coding Challenges
        </div>
      </div>
      <ul>
        <li>
          <div class="navButton-img-container navButton-img-container-child">
            <img class="bookmark-img" src="img/bookmark.png" alt="Bookmark">
            <div id="navButton-challenges-search" class="navButton navButton-child col-sm-9">
              Search
            </div>
          </div>
        </li>
      </ul>
    </li>
  </ul>
</div>

<script>  
  $(document).ready(function () {
    HideBookmarks();    
    $(".navButton-img-container-child").parent().hide();  // Hide all sub nav buttons
    UpdateCurrentProjectLabel();
    ShowNavSubMenu();
  });

  function UpdateCurrentProjectLabel(){
    var project = sessionStorage.getItem("ActiveProject");
    if(project == null){
      $('#navButton-projects-current').text('Current project: None');
    }
    else{
      $('#navButton-projects-current').text(project);
    }
  }

  function ShowNavSubMenu() {

    var bookmarkIndex = sessionStorage.getItem("BookmarkIndex");
    if (bookmarkIndex != null) {

      var bookmarkMapping = bookmarks_htmlPages[bookmarkIndex];
      var navButtonElementId = bookmarkMapping[0];
      var bookmarkDepth = bookmarkMapping[2]

      var navButtonElement = $("#" + navButtonElementId);

      
      var ul = null;
      if (bookmarkDepth == 0) {
        var ul = navButtonElement.parent().next(); // Get sub menu

        //Show 2nd  bookmarker for the first child (in the bookmarker hierarchy).
        //                                div      ul                li                  div              img
        var imgElement = navButtonElement.parent().next().children().first().children().first().children().first();
        $(imgElement).css('visibility', 'visible');
      }
      else if (bookmarkDepth == 1) {
        $('#' + navButtonElementId).prev().css('visibility', 'visible'); //Show Bookmarker
        var ul = navButtonElement.parent().parent().parent(); // Get sub menu
        //Show 2nd bookmaker for the parent (in the bookmarker hierarchy).
        //                                 div      li        ul      li                 div                img
        //var imgElement = navButtonElement.parent().parent().parent().parent().children().first().children().first();
        //$(imgElement).css('visibility', 'visible');
      }

      var subButtons = $(ul).children(); //Array of List Item
      for (var i = 0; i < subButtons.length; i++) {
        var li = subButtons[i];
        $(li).show();
      }
    }
  }

  $(".navButton").on('mouseover', function () {
    $(this).css("background-color", "#5865F2");
  });

  $(".navButton").on('mouseleave', function () {
    $(this).css("background-color", "inherit");
  });

  $(".navButton").on('click', function () {
    //Get clicked element
    var elementId = $(this).attr('id');

    //Loop through bookmark mapping and get the index of the clicked bookmark
    var BookmarkIndex = getBookmarkIndexByElementId(elementId); //Method can be found in shared/page-mapper.js

    if (BookmarkIndex > -1) {
      sessionStorage.setItem("BookmarkIndex", BookmarkIndex);
    }

    //Refresh page
    location.reload();
  });

  function HideBookmarks() {
    $('.bookmark-img').each(function (i, obj) {
      $(this).css('visibility', 'hidden');
    });
  }
</script>